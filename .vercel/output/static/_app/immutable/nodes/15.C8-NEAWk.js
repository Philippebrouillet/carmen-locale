import{s as at,e as I,c as b,b as D,f as m,m as p,i as N,n as U,t as G,a as C,d as V,g as T,q as O,h as M,j as x,I as ft,k as F,B as P,l as q}from"../chunks/scheduler.BoY_d1jh.js";import{S as rt,i as ct,f as ut,a as R,t as H,g as ot,c as mt,b as Mt,m as vt,d as _t}from"../chunks/index.C5ymHmkt.js";import{e as E,u as dt,o as ht}from"../chunks/each.VpouubDL.js";import{c as gt}from"../chunks/clock.svelte.pa43Gjrj.js";import{l as Lt}from"../chunks/location.store.a1q1W2o2.js";import{d as $}from"../chunks/formater.C10dx8Nx.js";const It="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KDTwhLS0gVXBsb2FkZWQgdG86IFNWRyBSZXBvLCB3d3cuc3ZncmVwby5jb20sIEdlbmVyYXRvcjogU1ZHIFJlcG8gTWl4ZXIgVG9vbHMgLS0+Cjxzdmcgd2lkdGg9IjgwMHB4IiBoZWlnaHQ9IjgwMHB4IiB2aWV3Qm94PSIwIDAgMTYgMTYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQogICAgPGcgY29sb3I9IiMwMDAwMDAiIGZvbnQtd2VpZ2h0PSI0MDAiIGZvbnQtZmFtaWx5PSJVYnVudHUiIGxldHRlci1zcGFjaW5nPSIwIiB3b3JkLXNwYWNpbmc9IjAiIHdoaXRlLXNwYWNlPSJub3JtYWwiIGZpbGw9ImdyYXkiPg0KICAgICAgICA8cGF0aCBkPSJNOCAyYTIuODQgMi44NCAwIDAgMC0xLjEyLjIyMWMtLjM0NS4xNDEtLjY1MS4zNDgtLjkwNi42MTV2LjAwM2wtLjAwMS4wMDJjLS4yNDguMjY5LS40NC41OTItLjU3NC45Ni0uMTM3LjM2Ny0uMjAzLjc2OS0uMjAzIDEuMiAwIC40MzUuMDY1Ljg0MS4yMDMgMS4yMDkuMTM1LjM2MS4zMjcuNjguNTc0Ljk1bC4wMDEuMDAyYy4yNTQuMjY3LjU1OC40NzcuOTAxLjYyNHYuMDAzYy4zNDYuMTQxLjcyMy4yMSAxLjEyLjIxLjM5NSAwIC43Ny0uMDY5IDEuMTE3LS4yMXYtLjAwMmMuMzQzLS4xNDcuNjQ0LS4zNTcuODkyLS42MjUuMjU1LS4yNjguNDUtLjU5LjU4Ni0uOTUyLjEzOC0uMzY4LjIwNC0uNzc0LjIwNC0xLjIxaC4wMWMwLS40My0uMDY1LS44MzEtLjIwMy0xLjE5OGEyLjc3MSAyLjc3MSAwIDAgMC0uNTg1LS45NjMgMi41IDIuNSAwIDAgMC0uODk3LS42MThBMi44MzUgMi44MzUgMCAwIDAgNy45OTkgMnpNOC4wMjQgMTAuMDAyYy0yLjMxNyAwLTMuNTYxLjIxMy00LjQ4Ni45MS0uNDYyLjM1LS43NjcuODI1LS45MzkgMS4zNzgtLjE3Mi41NTMtLjIyNi45NzUtLjIyOCAxLjcxTDggMTQuMDAyaDUuNjI5Yy0uMDAxLS43MzYtLjA1Mi0xLjE1OS0uMjI1LTEuNzEyLS4xNzItLjU1My0uNDc3LTEuMDI3LS45NC0xLjM3Ni0uOTIzLS42OTctMi4xMjQtLjkxMi00LjQ0LS45MTJ6IiBzdHlsZT0ibGluZS1oZWlnaHQ6MTI1JTstaW5rc2NhcGUtZm9udC1zcGVjaWZpY2F0aW9uOidVYnVudHUsIE5vcm1hbCc7Zm9udC12YXJpYW50LWxpZ2F0dXJlczpub3JtYWw7Zm9udC12YXJpYW50LXBvc2l0aW9uOm5vcm1hbDtmb250LXZhcmlhbnQtY2Fwczpub3JtYWw7Zm9udC12YXJpYW50LW51bWVyaWM6bm9ybWFsO2ZvbnQtdmFyaWFudC1hbHRlcm5hdGVzOm5vcm1hbDtmb250LWZlYXR1cmUtc2V0dGluZ3M6bm9ybWFsO3RleHQtaW5kZW50OjA7dGV4dC1hbGlnbjpzdGFydDt0ZXh0LWRlY29yYXRpb24tbGluZTpub25lO3RleHQtZGVjb3JhdGlvbi1zdHlsZTpzb2xpZDt0ZXh0LWRlY29yYXRpb24tY29sb3I6IzAwMDAwMDt0ZXh0LXRyYW5zZm9ybTpub25lO3RleHQtb3JpZW50YXRpb246bWl4ZWQ7c2hhcGUtcGFkZGluZzowO2lzb2xhdGlvbjphdXRvO21peC1ibGVuZC1tb2RlOm5vcm1hbCIgb3ZlcmZsb3c9InZpc2libGUiLz4NCiAgICA8L2c+DQo8L3N2Zz4=";function K(c,t,e){const l=c.slice();return l[1]=t[e],l}function bt(c){let t,e=(c[0].details.number??"").toString().padStart(2,"0")+"",l,s,i,r,a=(c[0].details.name??"Ticket X")+"",n,h,Y,j,y,z="time",w,A,W="duration",S,v=E(c[0].details.prestations??[]),g=[];for(let o=0;o<v.length;o+=1)g[o]=tt(K(c,v,o));let L=c[0].rdvTime!=null&&et();return{c(){t=I("div"),l=G(e),s=C(),i=I("div"),r=I("div"),n=G(a),h=C();for(let o=0;o<g.length;o+=1)g[o].c();Y=C(),j=I("div"),y=I("div"),y.textContent=z,w=C(),A=I("div"),A.textContent=W,S=C(),L&&L.c(),this.h()},l(o){t=b(o,"DIV",{class:!0});var _=D(t);l=V(_,e),_.forEach(m),s=T(o),i=b(o,"DIV",{});var d=D(i);r=b(d,"DIV",{});var Z=D(r);n=V(Z,a),Z.forEach(m),h=T(d);for(let u=0;u<g.length;u+=1)g[u].l(d);d.forEach(m),Y=T(o),j=b(o,"DIV",{});var f=D(j);y=b(f,"DIV",{"data-svelte-h":!0}),O(y)!=="svelte-w85nr7"&&(y.textContent=z),w=T(f),A=b(f,"DIV",{"data-svelte-h":!0}),O(A)!=="svelte-1lgoeh0"&&(A.textContent=W),S=T(f),L&&L.l(f),f.forEach(m),this.h()},h(){p(t,"class","number svelte-woksiy")},m(o,_){N(o,t,_),M(t,l),N(o,s,_),N(o,i,_),M(i,r),M(r,n),M(i,h);for(let d=0;d<g.length;d+=1)g[d]&&g[d].m(i,null);N(o,Y,_),N(o,j,_),M(j,y),M(j,w),M(j,A),M(j,S),L&&L.m(j,null)},p(o,_){if(_&1&&e!==(e=(o[0].details.number??"").toString().padStart(2,"0")+"")&&x(l,e),_&1&&a!==(a=(o[0].details.name??"Ticket X")+"")&&x(n,a),_&1){v=E(o[0].details.prestations??[]);let d;for(d=0;d<v.length;d+=1){const Z=K(o,v,d);g[d]?g[d].p(Z,_):(g[d]=tt(Z),g[d].c(),g[d].m(i,null))}for(;d<g.length;d+=1)g[d].d(1);g.length=v.length}o[0].rdvTime!=null?L||(L=et(),L.c(),L.m(j,null)):L&&(L.d(1),L=null)},d(o){o&&(m(t),m(s),m(i),m(Y),m(j)),ft(g,o),L&&L.d()}}}function pt(c){let t,e="PAUSE";return{c(){t=I("div"),t.textContent=e},l(l){t=b(l,"DIV",{"data-svelte-h":!0}),O(t)!=="svelte-8houmo"&&(t.textContent=e)},m(l,s){N(l,t,s)},p:U,d(l){l&&m(t)}}}function tt(c){let t,e=c[1].name+"",l,s,i=$(c[1].price)+"",r;return{c(){t=I("div"),l=G(e),s=C(),r=G(i)},l(a){t=b(a,"DIV",{});var n=D(t);l=V(n,e),s=T(n),r=V(n,i),n.forEach(m)},m(a,n){N(a,t,n),M(t,l),M(t,s),M(t,r)},p(a,n){n&1&&e!==(e=a[1].name+"")&&x(l,e),n&1&&i!==(i=$(a[1].price)+"")&&x(r,i)},d(a){a&&m(t)}}}function et(c){let t,e="RDV";return{c(){t=I("div"),t.textContent=e},l(l){t=b(l,"DIV",{"data-svelte-h":!0}),O(t)!=="svelte-1blc4yy"&&(t.textContent=e)},m(l,s){N(l,t,s)},d(l){l&&m(t)}}}function jt(c){let t;function e(i,r){return i[0].details&&i[0].details.tickettype=="BREAK"?pt:bt}let l=e(c),s=l(c);return{c(){t=I("div"),s.c(),this.h()},l(i){t=b(i,"DIV",{class:!0});var r=D(t);s.l(r),r.forEach(m),this.h()},h(){p(t,"class","ticket svelte-woksiy")},m(i,r){N(i,t,r),s.m(t,null)},p(i,[r]){l===(l=e(i))&&s?s.p(i,r):(s.d(1),s=l(i),s&&(s.c(),s.m(t,null)))},i:U,o:U,d(i){i&&m(t),s.d()}}}function yt(c,t,e){let{ticket:l}=t;return c.$$set=s=>{"ticket"in s&&e(0,l=s.ticket)},[l]}class kt extends rt{constructor(t){super(),ct(this,t,yt,jt,at,{ticket:0})}}function lt(c,t,e){const l=c.slice();return l[5]=t[e],l}function it(c,t,e){const l=c.slice();return l[8]=t[e],l}function st(c,t){let e,l,s;return l=new kt({props:{ticket:t[8]}}),{key:c,first:null,c(){e=q(),mt(l.$$.fragment),this.h()},l(i){e=q(),Mt(l.$$.fragment,i),this.h()},h(){this.first=e},m(i,r){N(i,e,r),vt(l,i,r),s=!0},p(i,r){t=i;const a={};r&1&&(a.ticket=t[8]),l.$set(a)},i(i){s||(R(l.$$.fragment,i),s=!0)},o(i){H(l.$$.fragment,i),s=!1},d(i){i&&m(e),_t(l,i)}}}function nt(c,t){let e,l,s,i,r,a,n,h=t[5].name+"",Y,j,y,z,w,A="Suivant",W,S,v=[],g=new Map,L,o,_,d=E(t[5].tickets);const Z=f=>f[8].id;for(let f=0;f<d.length;f+=1){let u=it(t,d,f),k=Z(u);g.set(k,v[f]=st(k,u))}return{key:c,first:null,c(){e=I("div"),l=I("header"),s=I("img"),a=C(),n=I("h3"),Y=G(h),j=C(),y=I("div"),z=C(),w=I("button"),w.textContent=A,W=C(),S=I("ul");for(let f=0;f<v.length;f+=1)v[f].c();L=C(),this.h()},l(f){e=b(f,"DIV",{id:!0,class:!0});var u=D(e);l=b(u,"HEADER",{class:!0});var k=D(l);s=b(k,"IMG",{src:!0,alt:!0,width:!0,height:!0,class:!0}),a=T(k),n=b(k,"H3",{});var J=D(n);Y=V(J,h),J.forEach(m),k.forEach(m),j=T(u),y=b(u,"DIV",{class:!0}),D(y).forEach(m),z=T(u),w=b(u,"BUTTON",{class:!0,"data-svelte-h":!0}),O(w)!=="svelte-x84lcy"&&(w.textContent=A),W=T(u),S=b(u,"UL",{class:!0});var B=D(S);for(let X=0;X<v.length;X+=1)v[X].l(B);B.forEach(m),L=T(u),u.forEach(m),this.h()},h(){P(s.src,i=t[5].avatar)||p(s,"src",i),p(s,"alt",r=t[5].name),p(s,"width","32"),p(s,"height","32"),p(s,"class","svelte-16ssirq"),p(l,"class","svelte-16ssirq"),p(y,"class","started svelte-16ssirq"),p(w,"class","svelte-16ssirq"),p(S,"class","svelte-16ssirq"),p(e,"id",o=t[5].id.toString()),p(e,"class","queue svelte-16ssirq"),this.first=e},m(f,u){N(f,e,u),M(e,l),M(l,s),M(l,a),M(l,n),M(n,Y),M(e,j),M(e,y),M(e,z),M(e,w),M(e,W),M(e,S);for(let k=0;k<v.length;k+=1)v[k]&&v[k].m(S,null);M(e,L),_=!0},p(f,u){t=f,(!_||u&1&&!P(s.src,i=t[5].avatar))&&p(s,"src",i),(!_||u&1&&r!==(r=t[5].name))&&p(s,"alt",r),(!_||u&1)&&h!==(h=t[5].name+"")&&x(Y,h),u&1&&(d=E(t[5].tickets),ot(),v=dt(v,u,Z,1,t,d,g,S,ht,st,null,it),ut()),(!_||u&1&&o!==(o=t[5].id.toString()))&&p(e,"id",o)},i(f){if(!_){for(let u=0;u<d.length;u+=1)R(v[u]);_=!0}},o(f){for(let u=0;u<v.length;u+=1)H(v[u]);_=!1},d(f){f&&m(e);for(let u=0;u<v.length;u+=1)v[u].d()}}}function Dt(c){let t,e=[],l=new Map,s,i=E(c[0]);const r=a=>a[5].id;for(let a=0;a<i.length;a+=1){let n=lt(c,i,a),h=r(n);l.set(h,e[a]=nt(h,n))}return{c(){t=I("div");for(let a=0;a<e.length;a+=1)e[a].c();this.h()},l(a){t=b(a,"DIV",{class:!0});var n=D(t);for(let h=0;h<e.length;h+=1)e[h].l(n);n.forEach(m),this.h()},h(){p(t,"class","queue-lines svelte-16ssirq")},m(a,n){N(a,t,n);for(let h=0;h<e.length;h+=1)e[h]&&e[h].m(t,null);s=!0},p(a,[n]){n&1&&(i=E(a[0]),ot(),e=dt(e,n,r,1,a,i,l,t,ht,nt,null,lt),ut())},i(a){if(!s){for(let n=0;n<i.length;n+=1)R(e[n]);s=!0}},o(a){for(let n=0;n<e.length;n+=1)H(e[n]);s=!1},d(a){a&&m(t);for(let n=0;n<e.length;n+=1)e[n].d()}}}function Q(c){return c.doneTime!=null||c.canceledTime!=null}function Nt(c,t,e){let l,s;F(c,Lt,r=>e(1,s=r)),F(c,gt,r=>e(2,r));function i(r){let a=[];for(let n of r.workers)a.push({id:n.id,avatar:n.avatar??It,name:n.name,tickets:r.tickets.filter(h=>!Q(h)&&h.workerId!=null&&h.workerId.toString()===n.id.toString())});return a.sort((n,h)=>n.name>h.name?1:-1),a.push({id:`${r.location.slug}-waiting`,avatar:r.location.avatar,name:"En attente",tickets:r.tickets.filter(n=>!Q(n)&&n.workerId==null)}),a.push({id:`${r.location.slug}-waiting`,name:"Terminer",tickets:r.tickets.filter(Q)}),a}return c.$$.update=()=>{c.$$.dirty&2&&e(0,l=i(s))},[l,s]}class Zt extends rt{constructor(t){super(),ct(this,t,Nt,Dt,at,{})}}export{Zt as component};
